<!DOCTYPE html>
<html lang="en"><head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="twitter:card" content="summary_large_image" /><!-- Begin Jekyll SEO tag v2.6.1 -->
<title>Python modules and packages | Fabian’s online notebook</title>
<meta name="generator" content="Jekyll v4.1.1" />
<meta property="og:title" content="Python modules and packages" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="Modules" />
<meta property="og:description" content="Modules" />
<link rel="canonical" href="https://fabiangunzinger.github.io/blog/python/2021/05/04/modules-and-packages.html" />
<meta property="og:url" content="https://fabiangunzinger.github.io/blog/python/2021/05/04/modules-and-packages.html" />
<meta property="og:site_name" content="Fabian’s online notebook" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2021-05-04T00:00:00-05:00" />
<script type="application/ld+json">
{"url":"https://fabiangunzinger.github.io/blog/python/2021/05/04/modules-and-packages.html","@type":"BlogPosting","headline":"Python modules and packages","dateModified":"2021-05-04T00:00:00-05:00","datePublished":"2021-05-04T00:00:00-05:00","mainEntityOfPage":{"@type":"WebPage","@id":"https://fabiangunzinger.github.io/blog/python/2021/05/04/modules-and-packages.html"},"description":"Modules","@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->
<link rel="stylesheet" href="/blog/assets/css/style.css"><link type="application/atom+xml" rel="alternate" href="https://fabiangunzinger.github.io/blog/feed.xml" title="Fabian's online notebook" /><link rel="shortcut icon" type="image/x-icon" href="/blog/images/favicon.ico"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/Primer/15.2.0/primer.css" integrity="sha512-xTz2ys4coGAOz8vuV1NcQBkgVmKhsSEtjbqyMJbBHRplFuvKIUo6xhLHpAyPt9mfR6twHJgn9OgVLuqOvjeBhg==" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.14.0/css/all.min.css" integrity="sha512-1PKOgIY59xJ8Co8+NE6FZ+LOAZKjy+KY8iq0G4B3CyeY6wYHN3yt9PW0XpSriVlkMXe40PTKnXrLnZ9+fkDaog==" crossorigin="anonymous" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.12.0/katex.min.css" integrity="sha512-h7nl+xz8wgDlNM4NqKEM4F1NkIRS17M9+uJwIGwuo8vGqIl4BhuCKdxjWEINm+xyrUjNCnK5dCrhM0sj+wTIXw==" crossorigin="anonymous" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.12.0/katex.min.js" integrity="sha512-/CMIhXiDA3m2c9kzRyd97MTb3MC6OVnx4TElQ7fkkoRghwDf6gi41gaT1PwF270W6+J60uTmwgeRpNpJdRV6sg==" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.12.0/contrib/auto-render.min.js" integrity="sha512-Do7uJAaHZm5OLrIv/yN4w0iG1dbu01kzdMNnFfu/mAqgUk6Nniv2JYHcwH+cNwjqgLcqcuBBk+JRvprLVI8azg==" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha512-0doc9hKxR3PYwso42RD1p5ySZpzzuDiOwMrdCEh2WdJZCjcmFKc/wEnL+z8fBQrnHoiNWbo+3fiGkOYXBdQp4A==" crossorigin="anonymous"></script>
    <script>
    document.addEventListener("DOMContentLoaded", function() {
        renderMathInElement( document.body, {
        delimiters: [
            {left: "$$", right: "$$", display: true},
            {left: "[%", right: "%]", display: true},
            {left: "$", right: "$", display: false}
        ]}
        );
    });
    </script>


<script>
function wrap_img(fn) {
    if (document.attachEvent ? document.readyState === "complete" : document.readyState !== "loading") {
        var elements = document.querySelectorAll(".post img");
        Array.prototype.forEach.call(elements, function(el, i) {
            if (el.getAttribute("title") && (el.className != "emoji")) {
                const caption = document.createElement('figcaption');
                var node = document.createTextNode(el.getAttribute("title"));
                caption.appendChild(node);
                const wrapper = document.createElement('figure');
                wrapper.className = 'image';
                el.parentNode.insertBefore(wrapper, el);
                el.parentNode.removeChild(el);
                wrapper.appendChild(el);
                wrapper.appendChild(caption);
            }
        });
    } else { document.addEventListener('DOMContentLoaded', fn); }
}
window.onload = wrap_img;
</script>

<script>
    document.addEventListener("DOMContentLoaded", function(){
    // add link icon to anchor tags
    var elem = document.querySelectorAll(".anchor-link")
    elem.forEach(e => (e.innerHTML = '<i class="fas fa-link fa-xs"></i>'));
    });
</script>
</head>
<body><header class="site-header">

  <div class="wrapper"><a class="site-title" rel="author" href="/blog/">Fabian&#39;s online notebook</a><nav class="site-nav">
        <input type="checkbox" id="nav-trigger" class="nav-trigger" />
        <label for="nav-trigger">
          <span class="menu-icon">
            <svg viewBox="0 0 18 15" width="18px" height="15px">
              <path d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.032C17.335,0,18,0.665,18,1.484L18,1.484z M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.032C17.335,6.031,18,6.696,18,7.516L18,7.516z M18,13.516C18,14.335,17.335,15,16.516,15H1.484 C0.665,15,0,14.335,0,13.516l0,0c0-0.82,0.665-1.483,1.484-1.483h15.032C17.335,12.031,18,12.695,18,13.516L18,13.516z"/>
            </svg>
          </span>
        </label>

        <div class="trigger"><a class="page-link" href="/blog/about/">About Me</a><a class="page-link" href="/blog/search/">Search</a><a class="page-link" href="/blog/categories/">Tags</a></div>
      </nav></div>
</header>
<main class="page-content" aria-label="Content">
      <div class="wrapper">
        <article class="post h-entry" itemscope itemtype="http://schema.org/BlogPosting">

  <header class="post-header">
    <h1 class="post-title p-name" itemprop="name headline">Python modules and packages</h1><p class="post-meta post-meta-title"><time class="dt-published" datetime="2021-05-04T00:00:00-05:00" itemprop="datePublished">
        May 4, 2021
      </time>
       • <span class="read-time" title="Estimated read time">
    
    
      3 min read
    
</span></p>

    
      <p class="category-tags"><i class="fas fa-tags category-tags-icon"></i></i> 
      
        <a class="category-tags-link" href="/blog/categories/#python">python</a>
        
      
      </p>
    

    </header>

  <div class="post-content e-content" itemprop="articleBody">
    <ul class="section-nav">
<li class="toc-entry toc-h1"><a href="#modules">Modules</a></li>
<li class="toc-entry toc-h1"><a href="#running-a-module-as-a-script">Running a module as a script</a></li>
<li class="toc-entry toc-h1"><a href="#packages">Packages</a></li>
<li class="toc-entry toc-h1"><a href="#sources">Sources</a></li>
</ul><h1 id="modules">
<a class="anchor" href="#modules" aria-hidden="true"><span class="octicon octicon-link"></span></a>Modules</h1>

<ul>
  <li>
    <p>A <em>module</em> is a file that contains definitions intended for reuse in a script
or an interactive session.</p>
  </li>
  <li>
    <p>Calling <code class="language-plaintext highlighter-rouge">import module</code> for the first time does three things: 1) create a new
namespace that acts as the global namespace for all objects defined in module,
2) execute the entire module, 3) create a name – identical to the module name – within the caller namespace that references to the module. This can be used to access module objects in the caller namespace as <code class="language-plaintext highlighter-rouge">module.object</code>.</p>
  </li>
  <li>
    <p>Calling <code class="language-plaintext highlighter-rouge">from module import symbol</code> imports <code class="language-plaintext highlighter-rouge">symbol</code> into the current namespace. However, the global namespace for <code class="language-plaintext highlighter-rouge">symbol</code> (if it’s a function) always remains the namespace in which it was defined, not the caller’s namespace.</p>
  </li>
  <li>
    <p>One reason <code class="language-plaintext highlighter-rouge">from module import *</code> is generally discouraged is that it directly imports all the module’s objects into the caller’s namespace, which is often said to cluter it up. Especially when importing large modules this makes sense, as it’s much cleaner to keep objects defined in imported modules in eponymous namespaces and accessing them via <code class="language-plaintext highlighter-rouge">module.object</code>, which immediately makes clear where object comes from and can help greatly with debugging.</p>
  </li>
  <li>
    <p>One implication of all the above is that as a developer, you don’t have to
worry about clashing variable names between modules, as they are each stored
in their own namespace, and accessed via <code class="language-plaintext highlighter-rouge">moduleA.foo</code> and <code class="language-plaintext highlighter-rouge">moduleB.foo</code> in
the caller namespace.</p>
  </li>
  <li>
    <p>When we import a module <code class="language-plaintext highlighter-rouge">foo</code>, the interpreter first searches for a built-in
module and, if none is found, searches a list of directories given the
variable <code class="language-plaintext highlighter-rouge">sys.path</code>. <code class="language-plaintext highlighter-rouge">sys.path</code> contains the directory of the input script,
the variable <code class="language-plaintext highlighter-rouge">PYTHONPATH</code>, and installation-dependent defaults. I can
manipulate <code class="language-plaintext highlighter-rouge">sys.path</code> using standard list operations; to add a directory, use
<code class="language-plaintext highlighter-rouge">sys.path.append('dirname')</code>.</p>
  </li>
  <li>
    <p>A common usecase of the above for me is to make a package available to Jupyter
Notebooks. By default, a notebook’s <code class="language-plaintext highlighter-rouge">sys.path</code> contains the folder the noteook
is located in and a bunch of conda managed directories linked to my running
Conda environment. To make available a package that lives in the project root
directory, just do
<code class="language-plaintext highlighter-rouge">sys.path.append('/Users/fgu/dev/projectname/packagename')</code>. I can then
reference modules from the package using <code class="language-plaintext highlighter-rouge">from packagename import module</code>.</p>
  </li>
  <li>
    <p>Use <code class="language-plaintext highlighter-rouge">dir(modulename)</code> to list all names defined in <code class="language-plaintext highlighter-rouge">modulname</code>, or <code class="language-plaintext highlighter-rouge">dir()</code> to
list all names that are currently defined.</p>
  </li>
</ul>

<h1 id="running-a-module-as-a-script">
<a class="anchor" href="#running-a-module-as-a-script" aria-hidden="true"><span class="octicon octicon-link"></span></a>Running a module as a script</h1>

<ul>
  <li>
    <p>For relative imports to work as described, for instance, here and in Chapter 8 in Python Essential References and in recipees 10.1 and 10.3 in the Python Cookbook, the file into which you import has itself to be a module rather than a top-level script. If it’s the latter, it’s name will be main and it won’t be considered part of a package, regardless of where on the file system it is saved. Generally, for a file to be considered part of a package, it needs to nave a dot (.) in its name, as in package.submodule.modulename.</p>
  </li>
  <li>
    <p>To import modules into a main script, one (somewhat unideal) solution is to
add the absolute path to the package to <code class="language-plaintext highlighter-rouge">sys.path</code>.</p>
  </li>
</ul>

<h1 id="packages">
<a class="anchor" href="#packages" aria-hidden="true"><span class="octicon octicon-link"></span></a>Packages</h1>

<ul>
  <li>Packages are collections of modules. They help structure Python’s module namespace by using dotted module
names. E.g. <code class="language-plaintext highlighter-rouge">a.b</code> refers to submodule <code class="language-plaintext highlighter-rouge">b</code> in package <code class="language-plaintext highlighter-rouge">a</code>. Thus, just as the
use of modules alleviates worries about clashing global variable names between
modules, using a package alleviates worries about clashing module between
multi-module packages.</li>
</ul>

<h1 id="sources">
<a class="anchor" href="#sources" aria-hidden="true"><span class="octicon octicon-link"></span></a>Sources</h1>

<ul>
  <li>
    <p><a href="https://docs.python.org/3/tutorial/modules.html#executing-modules-as-scripts">Python docs -
Modules</a></p>
  </li>
  <li>
    <p><a href="https://stackoverflow.com/questions/14132789/relative-imports-in-python-2-7/14132912#14132912">SO answer on relative imports for
scripts</a></p>
  </li>
</ul>


  </div><a class="u-url" href="/blog/python/2021/05/04/modules-and-packages.html" hidden></a>
</article>
      </div>
    </main><footer class="site-footer h-card">
  <data class="u-url" href="/blog/"></data>

  <div class="wrapper">

    <div class="footer-col-wrapper">
      <div class="footer-col">
        <p class="feed-subscribe">
          <a href="/blog/feed.xml">
            <svg class="svg-icon orange">
              <use xlink:href="/blog/assets/minima-social-icons.svg#rss"></use>
            </svg><span>Subscribe</span>
          </a>
        </p>
      </div>
      <div class="footer-col">
        <p>Online notebook for code and thoughts.</p>
      </div>
    </div>

    <div class="social-links"><ul class="social-media-list"></ul>
</div>

  </div>

</footer>
</body>

</html>
